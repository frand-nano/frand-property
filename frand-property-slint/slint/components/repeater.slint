import { LineEdit, VerticalBox, HorizontalBox } from "std-widgets.slint";

export struct RepeaterData {
    text: string,
    repeated: string,
}

export global RepeaterDataGlobal {
    in-out property <[RepeaterData]> data: [{}];
}

component RepeaterDataComponent inherits Rectangle {
    in-out property <int> global-index: 0;
    in-out property <string> global-text: RepeaterDataGlobal.data[global-index].text;
    changed global-text => { RepeaterDataGlobal.data[global-index].text = self.global-text; }
    out property <string> global-repeated: RepeaterDataGlobal.data[global-index].repeated;
}

export component Repeater inherits RepeaterDataComponent {
    VerticalBox {
        Text {
            text: "Repeater";
            font-size: 20px;
            horizontal-alignment: center;
        }

        HorizontalBox {
            Text {
                text: "Input:";
                vertical-alignment: center;
            }

            LineEdit {
                placeholder-text: "Enter text (max 20 chars)";
                text <=> root.global-text;
            }
        }

        Text {
            text: "Repeated: " + root.global-repeated;
            font-size: 16px;
        }
    }
}
