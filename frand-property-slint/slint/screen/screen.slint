import { StartScreen } from "start.slint";
import { PayScreen } from "pay.slint";

export enum ScreenVariant {
    Start,
    Pay
}

export struct ScreenGlobalData {
    current-screen: ScreenVariant,
}

export global ScreenGlobal {
    in-out property <[ScreenGlobalData]> data: [{ }];
    callback confirm-start(int);
    callback cancel-pay(int);
}

component ScreenGlobalComponent inherits Rectangle {
    in-out property <int> global-index: 0;
    out property <ScreenVariant> global-current-screen: ScreenGlobal.data[global-index].current-screen;
    callback global-confirm-start;
    global-confirm-start => {
        ScreenGlobal.confirm-start(global-index);
    }
    callback global-cancel-pay;
    global-cancel-pay => {
        ScreenGlobal.cancel-pay(global-index);
    }
}

export component Screen inherits ScreenGlobalComponent {
    if root.global-current-screen == ScreenVariant.Start: StartScreen {
        on-confirm => {
            root.global-confirm-start();
        }
    }
    if root.global-current-screen == ScreenVariant.Pay: PayScreen {
        on-cancel => {
            root.global-cancel-pay();
        }
    }
}
